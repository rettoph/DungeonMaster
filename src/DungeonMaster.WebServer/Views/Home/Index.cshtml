@using DungeonMaster.Library
@using DungeonMaster.WebServer.Services
@using DungeonMaster.WebServer.Dtos
@using Discord.WebSocket
@using DungeonMaster.Library.Models

@inject DiscordUser discord
@inject DungeonBot bot

<div id="guilds-container" class="section col-md-6 align-self-center">
    <div class="section-head">
        <h1>Guilds</h1>
        <p>Select guild or <a href="@bot.AuthorizeUrl">click here</a> to add DungeonMaster into a guild you manage.</p>
    </div>


    <div class="section-body">
        @foreach (Guild guild in await discord.Guilds.Value)
        {
            <a href="@Url.Action("Index", "Guilds", new { currentGuildId = guild.Id })">
                <div class="guild">
                    <img class="icon" src="@guild.SocketInstance.Value.IconUrl" />
                    <span class="name">@guild.SocketInstance.Value.Name</span>
                </div>
            </a>
        }
    </div>
</div>
